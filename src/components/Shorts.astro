---
import youtubeData from '../data/youtube-cache.json';

// Take the first 6 shorts for display
const recentShorts = youtubeData.shorts.slice(0, 6);
---

<section id="shorts" class="py-24 bg-slate-50 dark:bg-slate-900/50">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="flex flex-col md:flex-row md:items-end justify-between mb-12 gap-4">
      <div>
        <h2 class="text-3xl font-bold tracking-tight text-slate-900 dark:text-white sm:text-4xl">
          Shorts
        </h2>
        <p class="mt-4 text-lg text-slate-600 dark:text-slate-300">
          Contenido r√°pido y directo sobre Laravel y desarrollo.
        </p>
      </div>
      <a href="https://www.youtube.com/@ElRinconDeIsma/shorts" target="_blank" class="inline-flex items-center gap-2 font-semibold text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300">
        Ver todos los shorts
        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
        </svg>
      </a>
    </div>

    <div class="grid gap-6 grid-cols-2 sm:grid-cols-3 lg:grid-cols-6">
      {recentShorts.map((short) => (
        <a href={short.url} target="_blank" class="group block space-y-3">
          <div class="relative aspect-[9/16] overflow-hidden rounded-2xl bg-slate-100 dark:bg-slate-800 shadow-md">
            <!-- Use real thumbnail if available -->
            {short.thumbnail ? (
              <img src={short.thumbnail} alt={short.title} class="absolute inset-0 w-full h-full object-cover transition-transform duration-300 group-hover:scale-105" />
            ) : (
              <div class="absolute inset-0 bg-gradient-to-br from-primary-500/20 to-accent-500/20 transition-transform duration-300 group-hover:scale-105"></div>
            )}
            <div class="absolute inset-0 flex items-center justify-center bg-black/20 group-hover:bg-black/30 transition-colors">
                <svg class="w-10 h-10 text-white opacity-80 group-hover:opacity-100 transition-opacity drop-shadow-lg" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M8 5v14l11-7z" />
                </svg>
            </div>
            <!-- Shorts badge -->
            <div class="absolute top-2 right-2 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded">
              SHORTS
            </div>
          </div>
          <div>
            <h3 class="text-sm font-semibold text-slate-900 group-hover:text-primary-600 dark:text-white dark:group-hover:text-primary-400 leading-tight line-clamp-2">
              {short.title}
            </h3>
            <div class="mt-1 flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400">
              <span>{short.views} vistas</span>
            </div>
          </div>
        </a>
      ))}
    </div>
  </div>
</section>
